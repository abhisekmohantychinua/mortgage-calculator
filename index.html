<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mortgage Calculator | Get the right mortgage for you</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.3/build/css/intlTelInput.css"
    />
    <style>
      :root {
        --bg: #ffffff;
        --text: #262626;
        --primary: #6d28d9;
        --primary-200: rgba(109, 40, 217, 0.15);
        --primary-300: #e9d5ff;
        --border: #e5e7eb;
        --muted: #6b7280;
        --danger: #ef4444;
        --radius: 12px;
      }

      /* Page base */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }
      html,
      body {
        max-width: 100%;
        overflow-x: hidden;
      }
      body {
        font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial,
          sans-serif;
        color: var(--text);
        background: var(--bg);
        line-height: 1.45;
        margin: 0;
      }
      h1 {
        text-align: center;
        font-weight: 800;
        margin: 28px 0 18px;
        color: #111827;
      }

      /* Layout */
      .mgc-container {
        max-width: 1180px;
        margin: 0 auto;
        padding: 0 24px 48px;
        display: grid;
        grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
        gap: 40px;
        align-items: start;
      }
      .mgc-form-section,
      .mgc-result-section {
        min-width: 0;
      }
      .mgc-form-section .mgc-field {
        margin-bottom: 24px;
      }
      .mgc-field label {
        display: block;
        font-size: 14px;
        font-weight: 600;
        color: #111827;
        margin-bottom: 8px;
      }
      .mgc-result-section {
        position: sticky;
        top: 32px;
      }

      /* Input group with suffix/prefix */
      .mgc-input-group {
        position: relative;
      }
      .mgc-text-input {
        width: 100%;
        padding: 12px 14px;
        padding-right: 64px; /* space for suffix */
        border: 1px solid var(--border);
        border-radius: 8px;
        font-size: 15px;
      }
      .mgc-text-input:focus {
        border-color: var(--primary);
        outline: none;
        box-shadow: 0 0 0 3px var(--primary-200);
      }
      .mgc-suffix,
      .mgc-prefix {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 14px;
        color: var(--muted);
        pointer-events: none;
      }
      .mgc-suffix {
        right: 12px;
      }
      .mgc-prefix {
        left: 12px;
      }
      .mgc-text-input.mgc-with-prefix {
        padding-left: 60px;
      }

      /* Sliders */
      .mgc-container input[type="range"] {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        height: 6px;
        border-radius: 999px;
        background: #e9e5f4;
        outline: none;
      }
      .mgc-container input[type="range"]:focus {
        outline: none;
        box-shadow: 0 0 0 3px var(--primary-200);
        border-radius: 999px;
      }
      .mgc-container input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        background: var(--primary);
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 0 0 3px #f4ecff;
      }
      .mgc-container input[type="range"]::-moz-range-thumb {
        width: 18px;
        height: 18px;
        background: var(--primary);
        border-radius: 50%;
        border: none;
        cursor: pointer;
      }
      /* Filled track visualization painted via JS */
      .mgc-container input[type="range"] {
        background-image: linear-gradient(
          to right,
          var(--primary) 0%,
          var(--primary) 0%,
          #e9e5f4 0%,
          #e9e5f4 100%
        );
      }
      .mgc-range-labels {
        display: flex;
        justify-content: space-between;
        font-size: 12px;
        color: var(--muted);
        margin-top: 8px;
        gap: 8px;
      }
      .mgc-range-labels span {
        min-width: 0;
        word-break: break-word;
      }

      /* Residency segmented */
      .mgc-residency {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0;
        border: 1px solid var(--border);
        border-radius: 10px;
        overflow: hidden;
      }
      .mgc-residency button {
        padding: 12px 10px;
        border: none;
        background: #fafafa;
        color: #374151;
        cursor: pointer;
        border-right: 1px solid var(--border);
        font-weight: 500;
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      }
      .mgc-residency button:last-child {
        border-right: none;
      }
      .mgc-residency button.active {
        background: var(--primary-200);
        color: var(--primary);
        box-shadow: inset 0 0 0 2px var(--primary);
      }

      /* Result card */
      .mgc-result {
        background: #fff;
        border: 1px solid var(--border);
        padding: 28px;
        border-radius: var(--radius);
      }
      .mgc-result h3 {
        margin: 0 0 16px;
        font-size: 18px;
        color: #111827;
        font-weight: 600;
      }
      .mgc-kpis {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        align-items: end;
      }
      .mgc-kpi {
        text-align: center;
      }
      .mgc-kpi small {
        display: block;
        color: var(--muted);
        margin-bottom: 6px;
      }
      .mgc-kpi .mgc-num {
        font-size: 30px;
        font-weight: 800;
        color: #4b0082;
      }
      .mgc-actions {
        display: flex;
        justify-content: center;
        margin: 14px 0 8px;
      }
      .mgc-btn-ghost {
        border: 1px solid var(--primary-300);
        color: var(--primary);
        background: #fff;
        padding: 10px 14px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.15s ease, color 0.15s ease,
          border-color 0.15s ease;
      }
      .mgc-btn-ghost:hover {
        background: var(--primary-200);
      }
      .mgc-hr {
        height: 1px;
        background: var(--border);
        margin: 18px 0;
      }

      /* Details form */
      .mgc-details h3 {
        font-size: 18px;
        margin: 0 0 12px;
        color: #111827;
      }
      .mgc-details .mgc-text-input {
        margin-bottom: 12px;
      }
      .mgc-btn {
        width: 100%;
        padding: 14px;
        background: var(--danger);
        color: #fff;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        font-weight: 700;
        margin-top: 16px;
      }
      .mgc-btn:hover {
        filter: brightness(0.95);
      }
      .mgc-btn-outline {
        border: 1px solid var(--primary-300);
        background: #fff;
        color: var(--primary);
        padding: 10px 14px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.15s ease, color 0.15s ease,
          border-color 0.15s ease;
      }
      .mgc-btn-outline:hover {
        background: var(--primary-200);
      }
      .mgc-note-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .mgc-small-note {
        font-size: 14px;
        color: var(--muted);
      }

      /* Fallback phone UI (when CDN blocked) */
      .mgc-phone-wrap {
        display: flex;
        gap: 8px;
        align-items: stretch;
      }
      .mgc-dial-select {
        min-width: 120px;
        padding: 10px 12px;
        border: 1px solid var(--border);
        border-radius: 8px;
        background: #fff;
        font-size: 14px;
      }
      .mgc-dial-select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px var(--primary-200);
      }

      /* Intl Tel Input adjustments */
      .iti {
        width: 100%;
      }
      .iti__country-list {
        z-index: 60;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        border: 1px solid var(--border);
        border-radius: 10px;
      }
      .iti--separate-dial-code .iti__selected-dial-code {
        font-weight: 600;
        color: #111827;
      }
      .iti--separate-dial-code .iti__selected-flag {
        background: #fff;
        border: 1px solid var(--border);
        border-right: none;
        border-radius: 8px 0 0 8px;
        padding: 0 10px;
      }
      .iti--separate-dial-code input[type="tel"].mgc-text-input {
        border-radius: 0 8px 8px 0;
      }
      .iti__selected-flag:hover {
        background: #fafafa;
      }

      /* Modal */
      .mgc-modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(17, 24, 39, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        padding: 20px;
        z-index: 50;
      }
      .mgc-modal-overlay.open {
        display: flex;
      }
      .mgc-modal {
        width: 100%;
        max-width: 680px;
        background: #fff;
        border-radius: 12px;
        border: 1px solid var(--border);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      }
      .mgc-modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 18px 20px;
        border-bottom: 1px solid var(--border);
      }
      .mgc-modal-title {
        font-size: 18px;
        font-weight: 700;
        color: #111827;
      }
      .mgc-modal-close {
        background: transparent;
        border: none;
        font-size: 20px;
        cursor: pointer;
        color: #6b7280;
      }
      .mgc-modal-body {
        padding: 16px 20px 6px;
      }
      .mgc-table {
        display: grid;
        gap: 10px;
      }
      .mgc-table-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 0;
      }
      .mgc-table-row + .mgc-table-row {
        border-top: 1px dashed var(--border);
      }
      .mgc-row-label {
        color: #374151;
        font-weight: 500;
      }
      .mgc-row-value {
        color: #111827;
        font-weight: 700;
      }
      .mgc-accordion {
        border: 1px solid var(--border);
        border-radius: 10px;
        overflow: hidden;
        margin-top: 8px;
      }
      .mgc-accordion-header {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 14px;
        background: #fafafa;
        border: none;
        cursor: pointer;
        font-weight: 600;
        color: #111827;
      }
      .mgc-accordion-chevron {
        transition: transform 0.2s ease;
        color: #6b7280;
      }
      .mgc-accordion.open .mgc-accordion-chevron {
        transform: rotate(180deg);
      }
      .mgc-accordion-value {
        font-weight: 700;
        color: #111827;
      }
      .mgc-accordion-body {
        display: none;
        padding: 8px 14px 14px;
        background: #fff;
      }
      .mgc-accordion.open .mgc-accordion-body {
        display: block;
      }
      .mgc-fees-list {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      .mgc-fees-list li {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px dashed var(--border);
      }
      .mgc-fees-list li:last-child {
        border-bottom: none;
      }
      .mgc-modal-footer {
        padding: 16px 20px 20px;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
      }

      @media (max-width: 1024px) {
        .mgc-container {
          grid-template-columns: 1fr;
          gap: 28px;
          padding: 0 16px 40px;
        }
        .mgc-result-section {
          position: static;
        }
        h1 {
          font-size: 28px;
        }
        .mgc-kpis {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <h1>Get the right mortgage for you</h1>

    <div class="mgc-container">
      <div class="mgc-form-section">
        <!-- Finance Amount -->
        <div class="mgc-field">
          <label>Finance Amount</label>
          <div class="mgc-input-group">
            <input
              type="text"
              id="mgc-loanAmountInput"
              class="mgc-text-input"
              value="300,000"
            />
            <span class="mgc-suffix">AED</span>
          </div>
          <input
            type="range"
            id="mgc-loanAmount"
            min="100000"
            max="5000000"
            step="1000"
            value="300000"
          />
          <div class="mgc-range-labels">
            <span id="mgc-loanMinLabel">100,000 AED</span>
            <span id="mgc-loanMaxLabel">5,000,000 AED</span>
          </div>
        </div>

        <!-- Finance Period -->
        <div class="mgc-field">
          <label>Finance Period</label>
          <div class="mgc-input-group">
            <input
              type="text"
              id="mgc-loanPeriodInput"
              class="mgc-text-input"
              value="25"
            />
            <span class="mgc-suffix">years</span>
          </div>
          <input type="range" id="mgc-loanPeriod" min="5" max="40" value="25" />
          <div class="mgc-range-labels">
            <span>5 years</span>
            <span>40 years</span>
          </div>
        </div>

        <!-- Profit Rate -->
        <div class="mgc-field">
          <label>Profit rate</label>
          <div class="mgc-input-group">
            <input
              type="text"
              id="mgc-interestRateInput"
              class="mgc-text-input"
              value="3.75"
            />
            <span class="mgc-suffix">%</span>
          </div>
          <input
            type="range"
            id="mgc-interestRate"
            min="1"
            max="15"
            step="0.01"
            value="3.75"
          />
          <div class="mgc-range-labels">
            <span>1%</span>
            <span>15%</span>
          </div>
        </div>
      </div>

      <div class="mgc-result-section">
        <div class="mgc-result">
          <h3>Estimate your monthly mortgage payment</h3>
          <div class="mgc-kpis">
            <div class="mgc-kpi">
              <small>monthly payment</small>
              <div class="mgc-num" id="mgc-monthlyPayment">0 AED</div>
            </div>
            <div class="mgc-kpi">
              <small>total profit paid</small>
              <div class="mgc-num" id="mgc-totalProfit">0 AED</div>
            </div>
          </div>
          <form id="mgc-form" class="mgc-details">
            <h3>Please enter your details</h3>
            <input
              type="text"
              id="mgc-name"
              class="mgc-text-input"
              placeholder="Enter your name"
            />
            <input
              type="email"
              id="mgc-email"
              class="mgc-text-input"
              placeholder="Enter your email address"
            />
            <input
              id="mgc-phone"
              type="tel"
              class="mgc-text-input"
              autocomplete="tel"
              placeholder="Enter your phone number"
            />
            <button class="mgc-btn" type="submit">
              Check your eligibility
            </button>
            <div class="mgc-note-row">
              <div class="mgc-small-note">
                We found <strong>51,937 properties</strong> within your budget.
              </div>
              <button class="mgc-btn-outline" type="button">
                View properties â†’
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      // Simplified calculator to match hateemmortgage.com
      const LIMITS = {
        finance: { min: 100000, max: 5000000, step: 1000 },
        period: { min: 5, max: 40, step: 1 },
        rate: { min: 1, max: 15, step: 0.01 },
      };

      // Elements
      const loanAmount = document.getElementById("mgc-loanAmount"); // finance amount
      const loanPeriod = document.getElementById("mgc-loanPeriod"); // years
      const interestRate = document.getElementById("mgc-interestRate"); // profit rate
      const monthlyPayment = document.getElementById("mgc-monthlyPayment");
      const totalProfitEl = document.getElementById("mgc-totalProfit");

      const loanAmountInput = document.getElementById("mgc-loanAmountInput");
      const loanPeriodInput = document.getElementById("mgc-loanPeriodInput");
      const interestRateInput = document.getElementById(
        "mgc-interestRateInput"
      );

      const loanMinLabel = document.getElementById("mgc-loanMinLabel");
      const loanMaxLabel = document.getElementById("mgc-loanMaxLabel");

      // Utils
      function format(num) {
        const n = Number(num);
        if (isNaN(n)) return "0";
        return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }
      function parseNum(v) {
        return parseFloat(String(v).replace(/[^0-9.]/g, "")) || 0;
      }
      function clamp(v, min, max) {
        return Math.max(min, Math.min(max, v));
      }
      function roundToStep(value, step) {
        return Math.round(value / step) * step;
      }
      function setRangeFill(rangeEl) {
        const min = parseFloat(rangeEl.min || 0);
        const max = parseFloat(rangeEl.max || 1);
        const val = parseFloat(rangeEl.value || 0);
        let pct = max === min ? 0 : ((val - min) / (max - min)) * 100;
        pct = Math.max(0, Math.min(100, pct));
        const p = pct.toFixed(2);
        rangeEl.style.backgroundImage = `linear-gradient(to right, var(--primary) 0%, var(--primary) ${p}%, #e9e5f4 ${p}%, #e9e5f4 100%)`;
      }

      function applyBounds() {
        loanAmount.min = LIMITS.finance.min;
        loanAmount.max = LIMITS.finance.max;
        loanAmount.step = LIMITS.finance.step;
        loanPeriod.min = LIMITS.period.min;
        loanPeriod.max = LIMITS.period.max;
        interestRate.min = LIMITS.rate.min;
        interestRate.max = LIMITS.rate.max;
        if (loanMinLabel)
          loanMinLabel.innerText = format(loanAmount.min) + " AED";
        if (loanMaxLabel)
          loanMaxLabel.innerText = format(loanAmount.max) + " AED";
      }

      function calculate() {
        const P = clamp(
          parseFloat(loanAmount.value) || 0,
          LIMITS.finance.min,
          LIMITS.finance.max
        );
        const r =
          clamp(
            parseFloat(interestRate.value) || 0,
            LIMITS.rate.min,
            LIMITS.rate.max
          ) /
          100 /
          12;
        const n =
          clamp(
            parseInt(loanPeriod.value) || 0,
            LIMITS.period.min,
            LIMITS.period.max
          ) * 12;
        const m = r === 0 ? P / n : (P * r) / (1 - Math.pow(1 + r, -n));
        const totalPaid = m * n;
        const totalProfit = totalPaid - P;
        if (monthlyPayment)
          monthlyPayment.innerText = format(Math.round(m)) + " AED";
        if (totalProfitEl)
          totalProfitEl.innerText = format(Math.round(totalProfit)) + " AED";
      }

      function reflectToInputs() {
        loanAmountInput.value = format(loanAmount.value);
        loanPeriodInput.value = String(parseInt(loanPeriod.value));
        interestRateInput.value = String(parseFloat(interestRate.value));
      }

      function updateAll() {
        applyBounds();
        reflectToInputs();
        [loanAmount, loanPeriod, interestRate].forEach(setRangeFill);
        calculate();
      }

      // Slider -> UI
      [loanAmount, loanPeriod, interestRate].forEach((el) =>
        el.addEventListener("input", updateAll)
      );
      [loanAmount, loanPeriod, interestRate].forEach((el) =>
        el.addEventListener("change", () => setRangeFill(el))
      );

      // Text input -> Sliders
      loanAmountInput.addEventListener("input", () => {
        const v = clamp(
          roundToStep(parseNum(loanAmountInput.value), LIMITS.finance.step),
          LIMITS.finance.min,
          LIMITS.finance.max
        );
        loanAmount.value = v;
        setRangeFill(loanAmount);
        calculate();
      });
      loanPeriodInput.addEventListener("input", () => {
        const v = clamp(
          parseInt(parseNum(loanPeriodInput.value) || 0),
          LIMITS.period.min,
          LIMITS.period.max
        );
        loanPeriod.value = v;
        setRangeFill(loanPeriod);
        calculate();
      });
      interestRateInput.addEventListener("input", () => {
        const v = clamp(
          parseNum(interestRateInput.value),
          LIMITS.rate.min,
          LIMITS.rate.max
        );
        interestRate.value = v;
        setRangeFill(interestRate);
        calculate();
      });

      // Initialize International Telephone Input (v25)
      const __initITI = () => {
        const phoneEl = document.querySelector("#mgc-phone");
        if (phoneEl && window.intlTelInput && !window.__iti) {
          window.__iti = window.intlTelInput(phoneEl, {
            initialCountry: "ae",
            nationalMode: false,
            separateDialCode: true,
            preferredCountries: [
              "ae",
              "sa",
              "om",
              "qa",
              "kw",
              "bh",
              "eg",
              "gb",
              "us",
              "in",
            ],
            loadUtils: () =>
              import(
                "https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.3/build/js/utils.js"
              ),
          });
        }
      };
      document.addEventListener("DOMContentLoaded", __initITI);
      window.addEventListener("load", __initITI);

      // Initial paint
      updateAll();

      // Form submission: log and alert labels with values
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("mgc-form");
        form?.addEventListener("submit", (e) => {
          e.preventDefault();
          const values = [
            ["Finance Amount", loanAmountInput.value + " AED"],
            ["Finance Period", loanPeriodInput.value + " years"],
            [
              "Profit Rate",
              parseFloat(interestRateInput.value).toFixed(2) + "%",
            ],
            ["Monthly Payment", monthlyPayment.textContent],
            ["Total Profit Paid", totalProfitEl.textContent],
            ["Name", document.getElementById("mgc-name").value],
            ["Email", document.getElementById("mgc-email").value],
            [
              "Phone",
              window.__iti
                ? window.__iti.getNumber()
                : document.getElementById("mgc-phone").value,
            ],
          ];
          const message = values.map(([k, v]) => `${k}: ${v}`).join("\n");
          console.log("Form submission:\n" + message);
          alert(message);
        });
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.3/build/js/intlTelInput.min.js"></script>
  </body>
</html>
